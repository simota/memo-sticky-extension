# メモ付箋 (Memo Sticky Extension)

Webページの好きなところに自分のメモ（付箋）を貼り付けることができるChrome拡張機能です。

## 主な機能

- **付箋の作成**: Webページ上の任意の位置に付箋を配置
- **編集・削除**: 付箋のテキストを自由に編集、不要な付箋は削除可能
- **ドラッグ&ドロップ**: 付箋を自由に移動可能
- **リサイズ**: 付箋のサイズを変更可能
- **色変更**: 6色のプリセットから選択
- **自動保存**: 付箋は自動的に保存され、ページリロード後も保持
- **エクスポート/インポート**: メモデータのバックアップと復元

## インストール方法

### 開発モードでインストール

1. **依存関係をインストール**
   ```bash
   npm install
   ```

2. **ビルド**
   ```bash
   npm run build
   ```

3. **Chromeに読み込み**
   - Chrome で `chrome://extensions/` を開く
   - 「デベロッパーモード」を有効にする
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - `dist` フォルダを選択

### Chrome Web Storeへの公開

1. **パッケージング**
   ```bash
   npm run package
   ```
   これにより `memo-sticky-extension-v1.0.0.zip` が生成されます。

2. **アップロード**
   - [Chrome Web Store Developer Dashboard](https://chrome.google.com/webstore/devconsole) にアクセス
   - 生成されたzipファイルをアップロード

## 使い方

### 基本操作

1. **新しいメモを作成**
   - 拡張機能アイコンをクリックして「新しいメモを追加」を選択
   - または、キーボードショートカット `Ctrl+Shift+M` (Mac: `Cmd+Shift+M`)
   - ページ上の好きな場所をクリック

2. **メモを編集**
   - 付箋のテキストエリアをクリックして直接入力
   - 変更は自動的に保存されます

3. **メモを移動**
   - 付箋のヘッダー部分をドラッグ

4. **メモのサイズ変更**
   - 右下のハンドルをドラッグ

5. **色を変更**
   - 付箋左上のカラーアイコンをクリック
   - プリセットから色を選択

6. **メモを削除**
   - 付箋右上の × ボタンをクリック

### キーボードショートカット

- `Ctrl+Shift+M` (Mac: `Cmd+Shift+M`) - 新しいメモ作成モードに入る
- `Esc` - メモ作成モードをキャンセル

## 設定

拡張機能のポップアップから「設定」をクリックすると、以下の設定が可能です:

### 基本設定
- **機能の有効/無効**
- **デフォルトの色**: 新規メモの初期色
- **デフォルトのサイズ**: 新規メモの幅と高さ
- **デフォルトのフォントサイズ**

### 詳細設定
- **URLのクエリパラメータを無視**: 有効にすると、URLのクエリ部分を無視してメモを保存
- **除外ドメイン**: 特定のドメインでメモ機能を無効化

### データ管理
- **エクスポート**: 全メモデータをJSONファイルとして保存
- **インポート**: 以前エクスポートしたデータを復元
- **全データ削除**: すべてのメモと設定を削除

## プロジェクト構成

```
memo-sticky-extension/
├── manifest.json              # 拡張機能マニフェスト
├── package.json
├── tsconfig.json
├── webpack.config.js
├── src/
│   ├── background/
│   │   └── service-worker.ts  # バックグラウンドスクリプト
│   ├── content/
│   │   ├── index.ts           # Content Script エントリーポイント
│   │   ├── MemoManager.ts     # メモ管理ロジック
│   │   ├── MemoComponent.ts   # 付箋UIコンポーネント
│   │   └── styles/
│   │       └── memo.css       # 付箋スタイル
│   ├── popup/
│   │   ├── popup.html
│   │   ├── popup.ts
│   │   └── popup.css
│   ├── options/
│   │   ├── options.html
│   │   ├── options.ts
│   │   └── options.css
│   ├── shared/
│   │   ├── types.ts           # 共通型定義
│   │   ├── storage.ts         # Storage APIラッパー
│   │   ├── utils.ts           # ユーティリティ関数
│   │   └── constants.ts       # 定数定義
│   └── assets/
│       └── icons/
└── dist/                      # ビルド出力先
```

## 開発

### スクリプト

```bash
# 開発ビルド（ファイル変更を監視）
npm run dev

# プロダクションビルド
npm run build

# 型チェックのみ
npm run type-check

# アイコン生成
npm run generate-icons

# パッケージング（Chrome Web Store用のzipファイル作成）
npm run package

# distディレクトリをクリーン
npm run clean
```

### 技術スタック

- **Manifest V3**: 最新のChrome拡張仕様
- **TypeScript**: 型安全性
- **Webpack**: モジュールバンドル
- **Chrome Storage API**: データ永続化

## ブラウザ互換性

- Chrome 88+
- Edge 88+
- その他Chromiumベースのブラウザ

## プライバシー

- すべてのメモデータはローカルに保存されます
- サーバーへのデータ送信は一切行いません
- 必要な権限:
  - `storage`: メモデータの保存
  - `activeTab`: 現在のタブへのアクセス
  - `<all_urls>`: すべてのページでメモ機能を使用

## ライセンス

MIT

## 今後の予定

- [ ] 要素紐付けモード（スクロールしても要素と一緒に移動）
- [ ] Markdown対応
- [ ] Chrome同期機能
- [ ] 全文検索
- [ ] メモのグループ化
- [ ] タグ機能

## トラブルシューティング

### メモが表示されない

1. 拡張機能が有効になっているか確認
2. ページをリロード
3. Console（F12）でエラーを確認

### メモが保存されない

1. ストレージの容量を確認（chrome://extensions/）
2. ブラウザのシークレットモードでは動作が異なる場合があります

## 貢献

バグ報告や機能リクエストは Issue で受け付けています。
プルリクエストも歓迎します。

## お問い合わせ

質問や要望がありましたら、Issue を作成してください。
